% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/filterVideoPeriod.R
\name{filterVideoPeriod}
\alias{filterVideoPeriod}
\title{Filter data based on video availability and annotation intervals}
\usage{
filterVideoPeriod(
  data,
  video.metadata,
  annotation.intervals = NULL,
  id.col = "ID",
  datetime.col = "datetime"
)
}
\arguments{
\item{data}{A \code{list} where each element is a \code{data.table} for a specific ID
(e.g., a specific camera or animal). Each dataset should include a column for datetimes.}

\item{video.metadata}{A \code{data.table} containing metadata for each video segment, with columns:
\code{ID} (unique identifier), \code{start} (start datetime), and \code{end} (end datetime).}

\item{annotation.intervals}{An optional \code{data.frame} or \code{data.table} containing annotation intervals
with columns: \code{ID}, \code{start}, and \code{end} (all datetimes). If \code{NULL} (default),
filtering is based solely on video availability.}

\item{id.col}{A \code{character} string indicating the column name in \code{video.metadata} and
\code{annotation.intervals} that contains the unique IDs matching the \code{data} list names. Default is \code{"ID"}.}

\item{datetime.col}{A \code{character} string indicating the name of the datetime column
in each dataset. Default is \code{"datetime"}.}
}
\value{
A \code{list} of filtered \code{data.table} objects, where each dataset contains only the rows
falling within both the video availability periods and the annotation intervals (if provided).
If no matching periods are found for a given ID, an empty \code{data.table} is returned.
}
\description{
This function subsets a list of \code{data.table} objects in two steps:
\enumerate{
\item First retains only periods where video footage was available (from video.metadata)
\item Then optionally further restricts to periods with manual annotations (from annotation.intervals)
}

The function handles temporal jumps between videos by processing each video segment separately.
Annotation intervals are only applied after establishing video-available periods.

For annotation intervals, missing \code{start} or \code{end} values are automatically filled with:
\itemize{
\item the earliest video start time for missing \code{start} values
\item the latest video end time for missing \code{end} values
}
}
