% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/regularizeTimeSeries.R
\name{regularizeTimeSeries}
\alias{regularizeTimeSeries}
\title{Regularize irregular high-frequency biologging time series}
\usage{
regularizeTimeSeries(
  data,
  id.col = "ID",
  datetime.col = "datetime",
  time.threshold = NULL,
  gap.threshold = 5,
  interpolation.method = "linear",
  return.data = TRUE,
  save.files = FALSE,
  output.folder = NULL,
  output.suffix = NULL,
  verbose = TRUE
)
}
\arguments{
\item{data}{Input data, which can be either:
\itemize{
\item A list of data frames/tables (each containing sensor data for one individual)
\item A single data frame/table
\item Character vector of paths to RDS files containing sensor data
}}

\item{id.col}{Character. Name of the column containing unique identifier for each tag/animal.
Used when input is a single data.frame that needs splitting. Default "ID".}

\item{datetime.col}{Character. Name of the datetime column. Must contain POSIXct values.
Default "datetime".}

\item{time.threshold}{Numeric. Maximum allowed deviation (in seconds) from regular
intervals. If \code{NULL} (default), automatically calculates as half of the nominal
sampling interval. Records beyond this threshold won't be assigned to regular times.}

\item{gap.threshold}{Numeric. Maximum gap duration (in seconds) for interpolation.
Gaps \eqn{\le} this value will be interpolated; larger gaps remain NA. Set to 0 to disable
interpolation. Default is 5 seconds.}

\item{interpolation.method}{Character. Interpolation method for small gaps. One of:
\itemize{
\item "linear" (default) - Linear interpolation via \code{zoo::na.approx}
\item "spline" - Spline interpolation via \code{zoo::na.spline}
\item "locf" - Last observation carried forward via \code{zoo::na.locf}
}}

\item{return.data}{Logical. Return processed data in memory? If FALSE and
\code{save.files = FALSE}, issues warning. Default TRUE.}

\item{save.files}{Logical. Save processed data as RDS files? Default FALSE.}

\item{output.folder}{Character. Directory to save output files when \code{save.files = TRUE}.
If NULL (default) and input is file paths, saves in same directory as input files.}

\item{output.suffix}{Character. A suffix to append to the file name when saving.
This parameter is only used if \code{save.files = TRUE}.}

\item{verbose}{Logical. Print progress messages? Default TRUE.}
}
\value{
Depending on input and parameters:
\itemize{
\item If single dataset input: Returns regularized data.table
\item If list/multiple files input: Returns list of regularized data.tables (when \code{return.data = TRUE})
\item If \code{return.data = FALSE}: Returns invisibly NULL (use with \code{save.files = TRUE})
}
}
\description{
\code{regularizeTimeSeries} processes high-frequency time series data from biologging sensors to
address irregularities such as time gaps and jitter. The function performs several key steps:
\enumerate{
\item Detects and quantifies time gaps and temporal jitter within the series.
\item Regularizes the time series to a consistent sampling interval.
\item Assigns original records to the nearest regular timestamp within a defined threshold.
\item Applies gap-filling strategies (e.g., linear, spline, LOCF interpolation) for
short gaps, while leaving larger gaps as \code{NA}.
}
}
\details{
The regularization algorithm proceeds as follows for each individual's dataset:
\enumerate{
\item The \strong{median sampling interval} is calculated from the observed \code{datetime}
differences. This median is used as the nominal interval for regularization.
\item A \strong{complete, regular time sequence} is generated, spanning from the
first to the last timestamp of the original data, at the calculated
nominal interval.
\item Each original record is then \strong{assigned to its nearest timestamp} in
this regular sequence. An assignment is only considered valid if the
time difference between the original record and the nearest regular
timestamp is within the \code{time.threshold}. Records outside this threshold
(or where no original record is near a regular timestamp) result in \code{NA}
values in the data columns for those regular time points.
\item For any \code{NA} values introduced during regularization (or existing initially),
\strong{gap-filling strategies} are applied. Gaps equal to or shorter than
\code{gap.threshold} are interpolated using the specified \code{interpolation.method}.
Longer gaps remain as \code{NA} to avoid spurious data generation.
}
}
\note{
For large datasets, consider processing in batches with \code{save.files = TRUE} and
\code{return.data = FALSE} to avoid memory overload.
}
\seealso{
\link{importTagData}
\link{filterDeploymentData}
\code{\link[zoo]{na.approx}} for interpolation methods
\code{\link[data.table]{as.data.table}} for efficient data handling
}
